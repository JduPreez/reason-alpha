["^ ","~:output",["^ ","~:js","goog.provide('ajax.url');\r\ngoog.require('cljs.core');\r\ngoog.require('clojure.string');\r\ngoog.require('ajax.util');\r\najax.url.key_encode = (function ajax$url$key_encode(key){\r\nif((key instanceof cljs.core.Keyword)){\r\nreturn cljs.core.name(key);\r\n} else {\r\nreturn key;\r\n}\r\n});\r\najax.url.value_encode = encodeURIComponent;\r\najax.url.key_value_pair_to_str = (function ajax$url$key_value_pair_to_str(p__32212){\r\nvar vec__32213 = p__32212;\r\nvar k = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32213,(0),null);\r\nvar v = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32213,(1),null);\r\nreturn [cljs.core.str.cljs$core$IFn$_invoke$arity$1(ajax.url.key_encode(k)),\"=\",cljs.core.str.cljs$core$IFn$_invoke$arity$1((ajax.url.value_encode.cljs$core$IFn$_invoke$arity$1 ? ajax.url.value_encode.cljs$core$IFn$_invoke$arity$1(v) : ajax.url.value_encode.call(null,v)))].join('');\r\n});\r\najax.url.vec_key_transform_fn = (function ajax$url$vec_key_transform_fn(var_args){\r\nvar G__32217 = arguments.length;\r\nswitch (G__32217) {\r\ncase 3:\r\nreturn ajax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\r\n\r\nbreak;\r\ncase 2:\r\nreturn ajax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\r\n\r\nbreak;\r\ncase 1:\r\nreturn ajax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));\r\n\r\nbreak;\r\ndefault:\r\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\r\n\r\n}\r\n});\r\n\r\najax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$3 = (function (vec_key_encode,k,v){\r\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(vec_key_encode.cljs$core$IFn$_invoke$arity$1 ? vec_key_encode.cljs$core$IFn$_invoke$arity$1(k) : vec_key_encode.call(null,k)),v], null);\r\n});\r\n\r\najax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$2 = (function (vec_key_encode,k){\r\nreturn (function (v){\r\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(vec_key_encode.cljs$core$IFn$_invoke$arity$1 ? vec_key_encode.cljs$core$IFn$_invoke$arity$1(k) : vec_key_encode.call(null,k)),v], null);\r\n});\r\n});\r\n\r\najax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$1 = (function (vec_key_encode){\r\nreturn (function (k,v){\r\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(vec_key_encode.cljs$core$IFn$_invoke$arity$1 ? vec_key_encode.cljs$core$IFn$_invoke$arity$1(k) : vec_key_encode.call(null,k)),v], null);\r\n});\r\n});\r\n\r\najax.url.vec_key_transform_fn.cljs$lang$maxFixedArity = 3;\r\n\r\najax.url.to_vec_key_transform = (function ajax$url$to_vec_key_transform(vec_strategy){\r\nvar vec_key_encode = (function (){var G__32218 = (function (){var or__4131__auto__ = vec_strategy;\r\nif(cljs.core.truth_(or__4131__auto__)){\r\nreturn or__4131__auto__;\r\n} else {\r\nreturn new cljs.core.Keyword(null,\"java\",\"java\",1958249105);\r\n}\r\n})();\r\nvar G__32218__$1 = (((G__32218 instanceof cljs.core.Keyword))?G__32218.fqn:null);\r\nswitch (G__32218__$1) {\r\ncase \"java\":\r\nreturn ((function (G__32218,G__32218__$1){\r\nreturn (function (k){\r\nreturn null;\r\n});\r\n;})(G__32218,G__32218__$1))\r\n\r\nbreak;\r\ncase \"rails\":\r\nreturn ((function (G__32218,G__32218__$1){\r\nreturn (function (k){\r\nreturn \"\";\r\n});\r\n;})(G__32218,G__32218__$1))\r\n\r\nbreak;\r\ncase \"indexed\":\r\nreturn cljs.core.identity;\r\n\r\nbreak;\r\ndefault:\r\nthrow (new Error([\"No matching clause: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(G__32218__$1)].join('')));\r\n\r\n}\r\n})();\r\nreturn ajax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$1(vec_key_encode);\r\n});\r\najax.url.param_to_key_value_pairs = (function ajax$url$param_to_key_value_pairs(var_args){\r\nvar G__32220 = arguments.length;\r\nswitch (G__32220) {\r\ncase 3:\r\nreturn ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));\r\n\r\nbreak;\r\ncase 2:\r\nreturn ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\r\n\r\nbreak;\r\ncase 1:\r\nreturn ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));\r\n\r\nbreak;\r\ndefault:\r\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\r\n\r\n}\r\n});\r\n\r\najax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$3 = (function (vec_key_transform,prefix,p__32221){\r\nvar vec__32222 = p__32221;\r\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32222,(0),null);\r\nvar value = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32222,(1),null);\r\n\r\nvar k1 = ajax.url.key_encode(key);\r\nvar new_key = (cljs.core.truth_(prefix)?(cljs.core.truth_(key)?[cljs.core.str.cljs$core$IFn$_invoke$arity$1(prefix),\"[\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(k1),\"]\"].join(''):prefix):k1);\r\nvar recurse = ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$2(vec_key_transform,new_key);\r\nif(typeof value === 'string'){\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,value], null)], null);\r\n} else {\r\nif((value instanceof cljs.core.Keyword)){\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,cljs.core.name(value)], null)], null);\r\n} else {\r\nif(cljs.core.map_QMARK_(value)){\r\nreturn cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(recurse,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.seq(value)], 0));\r\n} else {\r\nif(cljs.core.sequential_QMARK_(value)){\r\nreturn cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(recurse,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2(vec_key_transform,cljs.core.seq(value))], 0));\r\n} else {\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,value], null)], null);\r\n\r\n}\r\n}\r\n}\r\n}\r\n});\r\n\r\najax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$2 = (function (vec_key_transform,prefix){\r\nreturn (function (p__32225){\r\nvar vec__32226 = p__32225;\r\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32226,(0),null);\r\nvar value = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32226,(1),null);\r\n\r\nvar k1 = ajax.url.key_encode(key);\r\nvar new_key = (cljs.core.truth_(prefix)?(cljs.core.truth_(key)?[cljs.core.str.cljs$core$IFn$_invoke$arity$1(prefix),\"[\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(k1),\"]\"].join(''):prefix):k1);\r\nvar recurse = ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$2(vec_key_transform,new_key);\r\nif(typeof value === 'string'){\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,value], null)], null);\r\n} else {\r\nif((value instanceof cljs.core.Keyword)){\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,cljs.core.name(value)], null)], null);\r\n} else {\r\nif(cljs.core.map_QMARK_(value)){\r\nreturn cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(recurse,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.seq(value)], 0));\r\n} else {\r\nif(cljs.core.sequential_QMARK_(value)){\r\nreturn cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(recurse,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2(vec_key_transform,cljs.core.seq(value))], 0));\r\n} else {\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,value], null)], null);\r\n\r\n}\r\n}\r\n}\r\n}\r\n});\r\n});\r\n\r\najax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$1 = (function (vec_key_transform){\r\nreturn (function (prefix,p__32229){\r\nvar vec__32230 = p__32229;\r\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32230,(0),null);\r\nvar value = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__32230,(1),null);\r\n\r\nvar k1 = ajax.url.key_encode(key);\r\nvar new_key = (cljs.core.truth_(prefix)?(cljs.core.truth_(key)?[cljs.core.str.cljs$core$IFn$_invoke$arity$1(prefix),\"[\",cljs.core.str.cljs$core$IFn$_invoke$arity$1(k1),\"]\"].join(''):prefix):k1);\r\nvar recurse = ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$2(vec_key_transform,new_key);\r\nif(typeof value === 'string'){\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,value], null)], null);\r\n} else {\r\nif((value instanceof cljs.core.Keyword)){\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,cljs.core.name(value)], null)], null);\r\n} else {\r\nif(cljs.core.map_QMARK_(value)){\r\nreturn cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(recurse,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.seq(value)], 0));\r\n} else {\r\nif(cljs.core.sequential_QMARK_(value)){\r\nreturn cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(recurse,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2(vec_key_transform,cljs.core.seq(value))], 0));\r\n} else {\r\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_key,value], null)], null);\r\n\r\n}\r\n}\r\n}\r\n}\r\n});\r\n});\r\n\r\najax.url.param_to_key_value_pairs.cljs$lang$maxFixedArity = 3;\r\n\r\najax.url.params_to_str = (function ajax$url$params_to_str(var_args){\r\nvar G__32234 = arguments.length;\r\nswitch (G__32234) {\r\ncase 2:\r\nreturn ajax.url.params_to_str.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));\r\n\r\nbreak;\r\ncase 1:\r\nreturn ajax.url.params_to_str.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));\r\n\r\nbreak;\r\ndefault:\r\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\r\n\r\n}\r\n});\r\n\r\najax.url.params_to_str.cljs$core$IFn$_invoke$arity$2 = (function (vec_strategy,params){\r\n\r\nreturn clojure.string.join.cljs$core$IFn$_invoke$arity$2(\"&\",cljs.core.map.cljs$core$IFn$_invoke$arity$2(ajax.url.key_value_pair_to_str,ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$3(ajax.url.to_vec_key_transform(vec_strategy),null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,params], null))));\r\n});\r\n\r\najax.url.params_to_str.cljs$core$IFn$_invoke$arity$1 = (function (vec_strategy){\r\nreturn (function (params){\r\n\r\nreturn clojure.string.join.cljs$core$IFn$_invoke$arity$2(\"&\",cljs.core.map.cljs$core$IFn$_invoke$arity$2(ajax.url.key_value_pair_to_str,ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$3(ajax.url.to_vec_key_transform(vec_strategy),null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [null,params], null))));\r\n});\r\n});\r\n\r\najax.url.params_to_str.cljs$lang$maxFixedArity = 2;\r\n\r\n/**\r\n * The request format for simple POST and GET.\r\n */\r\najax.url.url_request_format = (function ajax$url$url_request_format(var_args){\r\nvar G__32236 = arguments.length;\r\nswitch (G__32236) {\r\ncase 0:\r\nreturn ajax.url.url_request_format.cljs$core$IFn$_invoke$arity$0();\r\n\r\nbreak;\r\ncase 1:\r\nreturn ajax.url.url_request_format.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));\r\n\r\nbreak;\r\ndefault:\r\nthrow (new Error([\"Invalid arity: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));\r\n\r\n}\r\n});\r\n\r\najax.url.url_request_format.cljs$core$IFn$_invoke$arity$0 = (function (){\r\nreturn ajax.url.url_request_format.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);\r\n});\r\n\r\najax.url.url_request_format.cljs$core$IFn$_invoke$arity$1 = (function (p__32237){\r\nvar map__32238 = p__32237;\r\nvar map__32238__$1 = (((((!((map__32238 == null))))?(((((map__32238.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__32238.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__32238):map__32238);\r\nvar vec_strategy = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__32238__$1,new cljs.core.Keyword(null,\"vec-strategy\",\"vec-strategy\",1843221372));\r\nreturn new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"write\",\"write\",-1857649168),ajax.util.to_utf8_writer(ajax.url.params_to_str.cljs$core$IFn$_invoke$arity$1(vec_strategy)),new cljs.core.Keyword(null,\"content-type\",\"content-type\",-508222634),\"application/x-www-form-urlencoded; charset=utf-8\"], null);\r\n});\r\n\r\najax.url.url_request_format.cljs$lang$maxFixedArity = 1;\r\n\r\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:doc","At first blush, it's pretty bizarre that an entire file is devoted to one  \n function, namely params-to-str, which just takes a map and converts it to\n a querystring. However, it turns out that people sometimes want to encode\n fairly complex maps and the behaviour in the presence of vectors/arrays\n is controversial.\n\n The basic question is: what {:a [1 2]} be encoded as? The correct answer\n as far as ring is concerned is a=1&a=2. This is also true of most Java\n implementations, ASP.NET, Angular, Haskell and even old-school ASP. This \n is called vec-strategy :java in the code. Rails and PHP, however, \n prefer a[]=1&a[]=2, which has an obvious implementation in a dynamic \n language. This is called vec-strategy :rails. Finally, there's what \n cljs-ajax (mistakenly) did between versions 0.4.0 and 0.6.x: \n a[0]=1&a[2]=1, which is called vec-strategy :indexed. This is retained \n mostly for people who need to keep compatibility with the previous behaviour.\n\n None of these are the \"correct answer\": the HTTP standards are\n silent on the subject, so you're left with what your server accepts, and\n different servers have different conventions. Worse, if you send the\n wrong convention it gets misinterpreted. Send strategy :rails to a :java\n server and you get { \"a[]\" [1 2]}. Worse, send strategy :java to a :rails\n server and you get { \"a\" 2 }. So it's important to know what your server's\n convention is.\n\n The situation for maps is simpler, pretty much everyone encodes\n {:a {:b 1}} as \"a[b]=1\". That is, assuming they process it at all.\n The HTTP spec is similarly silent on this and your server may get your\n language's equivalent of { \"a[b]\" 1 }. In cases like this, you have two\n choices 1) write your own server-side decoder or 2) don't ever send\n nested maps.\n\n If you ever wanted to consider exactly how bad the effect of supporting\n a wide range of use cases, consider that this was the original code:\n\n (defn params-to-str [params]\n    (if params\n        (-> params      \n            clj->js\n            structs/Map.\n            query-data/createFromMap\n            .toString)))\n\n This code remains completely correct for at least 90% of actual users\n of cljs-ajax. Now we have ~50 SLOCs achieving much the same result.\n","~:file","ajax/url.cljc","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",13],"~:ns-aliases",["^ ","~$cljs.loader","~$shadow.loader","~$react","~$module$node_modules$react$index","~$create-react-class","~$module$node_modules$create_react_class$index","~$react-dom","~$module$node_modules$react_dom$index","~$clojure.spec.alpha","~$cljs.spec.alpha","~$clojure.pprint","~$cljs.pprint","~$clojure.spec.gen.alpha","~$cljs.spec.gen.alpha"],"~:use-macros",null,"~:excludes",["~#set",[]],"~:name","~$ajax.url","~:op","~:ns","~:imports",null,"~:requires",["^ ","~$clojure.string","^T","~$str","^T","~$ajax.util","^V","~$u","^V","~$cljs.core","^W","~$goog","^X"],"~:seen",["^M",["~:require","~:require-macros"]],"~:uses",null,"^[",["^ ","~$ajax.macros","^11","~$m","^11","^W","^W"],"~:form",["~#list",["~$ns","^O","At first blush, it's pretty bizarre that an entire file is devoted to one  \n function, namely params-to-str, which just takes a map and converts it to\n a querystring. However, it turns out that people sometimes want to encode\n fairly complex maps and the behaviour in the presence of vectors/arrays\n is controversial.\n\n The basic question is: what {:a [1 2]} be encoded as? The correct answer\n as far as ring is concerned is a=1&a=2. This is also true of most Java\n implementations, ASP.NET, Angular, Haskell and even old-school ASP. This \n is called vec-strategy :java in the code. Rails and PHP, however, \n prefer a[]=1&a[]=2, which has an obvious implementation in a dynamic \n language. This is called vec-strategy :rails. Finally, there's what \n cljs-ajax (mistakenly) did between versions 0.4.0 and 0.6.x: \n a[0]=1&a[2]=1, which is called vec-strategy :indexed. This is retained \n mostly for people who need to keep compatibility with the previous behaviour.\n\n None of these are the \"correct answer\": the HTTP standards are\n silent on the subject, so you're left with what your server accepts, and\n different servers have different conventions. Worse, if you send the\n wrong convention it gets misinterpreted. Send strategy :rails to a :java\n server and you get { \"a[]\" [1 2]}. Worse, send strategy :java to a :rails\n server and you get { \"a\" 2 }. So it's important to know what your server's\n convention is.\n\n The situation for maps is simpler, pretty much everyone encodes\n {:a {:b 1}} as \"a[b]=1\". That is, assuming they process it at all.\n The HTTP spec is similarly silent on this and your server may get your\n language's equivalent of { \"a[b]\" 1 }. In cases like this, you have two\n choices 1) write your own server-side decoder or 2) don't ever send\n nested maps.\n\n If you ever wanted to consider exactly how bad the effect of supporting\n a wide range of use cases, consider that this was the original code:\n\n (defn params-to-str [params]\n    (if params\n        (-> params      \n            clj->js\n            structs/Map.\n            query-data/createFromMap\n            .toString)))\n\n This code remains completely correct for at least 90% of actual users\n of cljs-ajax. Now we have ~50 SLOCs achieving much the same result.\n",["^13",["^Z",["^T","~:as","^U"],["^V","^15","~$u"]]],["^13",["^[",["^11","^15","~$m"]]]]],"~:flags",["^ ","^Z",["^M",[]],"^[",["^M",[]]],"~:js-deps",["^ "],"~:deps",["^X","^W","^T","^V"]],"^Q","^O","~:resource-id",["~:shadow.build.classpath/resource","ajax/url.cljc"],"~:compiled-at",1574163718181,"~:resource-name","ajax/url.cljc","~:warnings",[],"~:source","(ns ajax.url\n\n\"At first blush, it's pretty bizarre that an entire file is devoted to one  \n function, namely params-to-str, which just takes a map and converts it to\n a querystring. However, it turns out that people sometimes want to encode\n fairly complex maps and the behaviour in the presence of vectors/arrays\n is controversial.\n\n The basic question is: what {:a [1 2]} be encoded as? The correct answer\n as far as ring is concerned is a=1&a=2. This is also true of most Java\n implementations, ASP.NET, Angular, Haskell and even old-school ASP. This \n is called vec-strategy :java in the code. Rails and PHP, however, \n prefer a[]=1&a[]=2, which has an obvious implementation in a dynamic \n language. This is called vec-strategy :rails. Finally, there's what \n cljs-ajax (mistakenly) did between versions 0.4.0 and 0.6.x: \n a[0]=1&a[2]=1, which is called vec-strategy :indexed. This is retained \n mostly for people who need to keep compatibility with the previous behaviour.\n\n None of these are the \\\"correct answer\\\": the HTTP standards are\n silent on the subject, so you're left with what your server accepts, and\n different servers have different conventions. Worse, if you send the\n wrong convention it gets misinterpreted. Send strategy :rails to a :java\n server and you get { \\\"a[]\\\" [1 2]}. Worse, send strategy :java to a :rails\n server and you get { \\\"a\\\" 2 }. So it's important to know what your server's\n convention is.\n\n The situation for maps is simpler, pretty much everyone encodes\n {:a {:b 1}} as \\\"a[b]=1\\\". That is, assuming they process it at all.\n The HTTP spec is similarly silent on this and your server may get your\n language's equivalent of { \\\"a[b]\\\" 1 }. In cases like this, you have two\n choices 1) write your own server-side decoder or 2) don't ever send\n nested maps.\n\n If you ever wanted to consider exactly how bad the effect of supporting\n a wide range of use cases, consider that this was the original code:\n\n (defn params-to-str [params]\n    (if params\n        (-> params      \n            clj->js\n            structs/Map.\n            query-data/createFromMap\n            .toString)))\n\n This code remains completely correct for at least 90% of actual users\n of cljs-ajax. Now we have ~50 SLOCs achieving much the same result.\n\"\n\n#?@ (:clj  ((:require \n             [ajax.macros :as m]\n             [ajax.util :as u]\n             [clojure.string :as str]))\n     :cljs ((:require \n             [clojure.string :as str]\n             [ajax.util :as u])\n             (:require-macros [ajax.macros :as m]))))\n\n\n(defn- key-encode [key]\n  (if (keyword? key) (name key) key))\n\n(def ^:private value-encode ; why doesn't def- exist?\n    #? (:clj (fn value-encode [u] (java.net.URLEncoder/encode (str u) \"UTF-8\"))\n        :cljs js/encodeURIComponent))\n\n(defn- key-value-pair-to-str [[k v]] \n       (str (key-encode k) \"=\" (value-encode v)))\n\n(m/defn-curried- vec-key-transform-fn [vec-key-encode k v]\n    [(vec-key-encode k) v])\n\n(defn- to-vec-key-transform [vec-strategy]\n    (let [vec-key-encode (case (or vec-strategy :java)\n                               :java (fn [k] nil) ; no subscript\n                               :rails (fn [k] \"\") ; [] subscript\n                               :indexed identity)] ; [1] subscript\n        (vec-key-transform-fn vec-key-encode)))\n\n\n(m/defn-curried- param-to-key-value-pairs [vec-key-transform prefix [key value]]\n    \"Takes a parameter and turns it into a sequence of key-value pairs suitable\n     for passing to `key-value-pair-to-str`. Since we can have nested maps and\n     vectors, we need a vec-key-transform function and the current query key\n     prefix as well as the key and value to be analysed. Ultimately, this \n     function walks the structure and flattens it.\" \n    (let [k1 (key-encode key)\n          new-key (if prefix \n                      (if key \n                          (str prefix \"[\" k1 \"]\")\n                          prefix)\n                      k1)\n          recurse (param-to-key-value-pairs vec-key-transform new-key)]\n        (cond \n            (string? value) ; string is sequential so we have to handle it separately\n            [[new-key value]]  ; (\"a\" 1) should be [\"a\" 1]\n\n            (keyword? value)\n            [[new-key (name value)]] ; (:a 1) should be [\"a\" 1]\n\n            (map? value)\n            (mapcat recurse (seq value)) ; {:b {:a 1}} should be [\"b[a]\" 1]\n\n            (sequential? value) ; behaviour depends on vec-key-transform\n            (->> (seq value)\n                 (map-indexed vec-key-transform)\n                 (mapcat recurse))\n\n            :else [[new-key value]])))\n\n(m/defn-curried params-to-str [vec-strategy params]\n    \"vec-strategy is one of :rails (a[]=3&a[]=4)\n                            :java (a=3&a=4) (this is the correct behaviour and the default)\n                            :indexed (a[3]=1&a[4]=1)\n     params is an arbitrary clojure map\"\n    (->> [nil params]\n         (param-to-key-value-pairs (to-vec-key-transform vec-strategy) nil)\n         (map key-value-pair-to-str)\n         (str/join \"&\")))\n\n(defn url-request-format\n  \"The request format for simple POST and GET.\"\n  ([] (url-request-format {})) \n  ([{:keys [vec-strategy]}]\n   {:write (u/to-utf8-writer (params-to-str vec-strategy))\n    :content-type \"application/x-www-form-urlencoded; charset=utf-8\"}))\n","~:reader-features",["^M",["~:cljs"]],"~:cljc",true,"~:source-map-compact",["^ ","mappings","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","names",["ajax.url/key-encode","key","cljs.core/Keyword","cljs.core/name","ajax.url/value-encode","js/encodeURIComponent","p__32212","vec__32213","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","ajax.url/key-value-pair-to-str","k","v","var_args","G__32217","ajax.url/vec-key-transform-fn","js/Error","vec-key-encode","ajax.url/to-vec-key-transform","vec-strategy","G__32218","or__4131__auto__","cljs.core/identity","ajax.url.vec_key_transform_fn.cljs$core$IFn$_invoke$arity$1","G__32220","ajax.url/param-to-key-value-pairs","p__32221","vec__32222","p__32225","vec__32226","p__32229","vec__32230","vec-key-transform","prefix","value","k1","new-key","recurse","ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$2","cljs.core/map?","cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic","cljs.core/seq","cljs.core/sequential?","cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2","G__32234","ajax.url/params-to-str","params","ajax.url.param_to_key_value_pairs.cljs$core$IFn$_invoke$arity$3","cljs.core.map.cljs$core$IFn$_invoke$arity$2","clojure.string.join.cljs$core$IFn$_invoke$arity$2","G__32236","ajax.url/url-request-format","p__32237","map__32238","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","ajax.url.url_request_format.cljs$core$IFn$_invoke$arity$1","ajax.util/to-utf8-writer","ajax.url.params_to_str.cljs$core$IFn$_invoke$arity$1"]]],"~:cache-keys",["~#cmap",[["^1:","goog/math/math.js"],[1567356087625,"~:shadow.build.compiler/resolve",["^ ","~:require-id",null,"~:deps-ids",["^M",[]],"~:deps-syms",["^X","~$goog.array","~$goog.asserts"]]],["^1:","goog/array/array.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^1L"]]],["^1:","goog/debug/error.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","goog/dom/nodetype.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","ajax/protocols.cljc"],[1572248672049,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^W"]]],["^1:","ajax/url.cljc"],[1572248672049,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^W","^T","^V"]]],["^1:","goog/object/object.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],"~:SHADOW-TIMESTAMP",[1574163601000,1567262080000],["^1:","goog/math/long.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^1L","~$goog.reflect"]]],["^1:","goog/functions/functions.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","goog/structs/map.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","~$goog.iter.Iterator","~$goog.iter.StopIteration","~$goog.object"]]],["^1:","ajax/util.cljc"],[1572248672049,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^W","~$ajax.protocols"]]],["^1:","goog/asserts/asserts.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","~$goog.debug.Error","~$goog.dom.NodeType","~$goog.string"]]],["^1:","goog/uri/uri.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^1K","^1L","^1U","~$goog.structs","~$goog.structs.Map","~$goog.uri.utils","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"]]],["^1:","goog/base.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",[]]],["^1:","goog/structs/structs.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^1K","^1Q"]]],["^1:","clojure/string.cljs"],[1567262080081,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^W","^1U","~$goog.string.StringBuffer"]]],["^1:","goog/string/string.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","goog/reflect/reflect.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","goog/string/stringbuffer.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","goog/iter/iter.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^1K","^1L","~$goog.functions","~$goog.math"]]],["^1:","cljs/core.cljs"],[1567262080081,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["~$goog.math.Long","~$goog.math.Integer","^1U","^1Q","^1K","~$goog.Uri","^1["]]],["^1:","goog/math/integer.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X"]]],["^1:","goog/uri/utils.js"],[1567356087625,"^1G",["^ ","^1H",null,"^1I",["^M",[]],"^1J",["^X","^1K","^1L","^1U"]]]]],"~:clj-info",["^ ","jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/source_map/base64.clj",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/default_data_readers.clj",1567262077000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/js_deps.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/data.json/0.2.6/data.json-0.2.6.jar!/clojure/data/json.clj",1567262076000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader.clj",1567262077000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/pprint.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/impl/inspect.clj",1567262077000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/reader_types.clj",1567262077000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/core.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/cljs-ajax/cljs-ajax/0.8.0/cljs-ajax-0.8.0.jar!/ajax/macros.clj",1572248672000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/analyzer.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/binaryage/devtools/0.9.10/devtools-0.9.10.jar!/devtools/defaults.clj",1567262098000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/source_map.clj",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/env.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/set.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/compiler.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/instant.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/source_map/base64_vlq.clj",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/tagged_literals.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/util.cljc",1567262080000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/edn.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/java/io.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/tools.reader/1.3.2/tools.reader-1.3.2.jar!/clojure/tools/reader/impl/errors.clj",1567262077000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/core.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojure/1.10.0/clojure-1.10.0.jar!/clojure/string.clj",1568573460000,"jar:file:/C:/Users/jacqu/.m2/repository/org/clojure/clojurescript/1.10.520/clojurescript-1.10.520.jar!/cljs/externs.clj",1567262080000],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","At first blush, it's pretty bizarre that an entire file is devoted to one  \n function, namely params-to-str, which just takes a map and converts it to\n a querystring. However, it turns out that people sometimes want to encode\n fairly complex maps and the behaviour in the presence of vectors/arrays\n is controversial.\n\n The basic question is: what {:a [1 2]} be encoded as? The correct answer\n as far as ring is concerned is a=1&a=2. This is also true of most Java\n implementations, ASP.NET, Angular, Haskell and even old-school ASP. This \n is called vec-strategy :java in the code. Rails and PHP, however, \n prefer a[]=1&a[]=2, which has an obvious implementation in a dynamic \n language. This is called vec-strategy :rails. Finally, there's what \n cljs-ajax (mistakenly) did between versions 0.4.0 and 0.6.x: \n a[0]=1&a[2]=1, which is called vec-strategy :indexed. This is retained \n mostly for people who need to keep compatibility with the previous behaviour.\n\n None of these are the \"correct answer\": the HTTP standards are\n silent on the subject, so you're left with what your server accepts, and\n different servers have different conventions. Worse, if you send the\n wrong convention it gets misinterpreted. Send strategy :rails to a :java\n server and you get { \"a[]\" [1 2]}. Worse, send strategy :java to a :rails\n server and you get { \"a\" 2 }. So it's important to know what your server's\n convention is.\n\n The situation for maps is simpler, pretty much everyone encodes\n {:a {:b 1}} as \"a[b]=1\". That is, assuming they process it at all.\n The HTTP spec is similarly silent on this and your server may get your\n language's equivalent of { \"a[b]\" 1 }. In cases like this, you have two\n choices 1) write your own server-side decoder or 2) don't ever send\n nested maps.\n\n If you ever wanted to consider exactly how bad the effect of supporting\n a wide range of use cases, consider that this was the original code:\n\n (defn params-to-str [params]\n    (if params\n        (-> params      \n            clj->js\n            structs/Map.\n            query-data/createFromMap\n            .toString)))\n\n This code remains completely correct for at least 90% of actual users\n of cljs-ajax. Now we have ~50 SLOCs achieving much the same result.\n","^7","ajax/url.cljc","^8",1,"^9",5,"^:",1,"^;",13],"^<",["^ ","^=","^>","^?","^@","^A","^B","^C","^D","^E","^F","^G","^H","^I","^J"],"^K",null,"^L",["^M",[]],"^N","^O","^R",null,"^S",["^ ","^T","^T","^U","^T","^V","^V","~$u","^V","^W","^W","^X","^X"],"^Y",["^M",["^Z","^["]],"~:shadow/js-access-global",["^M",["encodeURIComponent","Error"]],"^10",null,"~:defs",["^ ","~$key-encode",["^ ","~:protocol-inline",null,"^5",["^ ","^7","ajax/url.cljc","^8",59,"^9",8,"^:",59,"^;",18,"~:private",true,"~:arglists",["^13",["~$quote",["^13",[["~$key"]]]]]],"^2U",true,"^N","~$ajax.url/key-encode","^7","ajax/url.cljc","^;",18,"~:method-params",["^13",[["^2X"]]],"~:protocol-impl",null,"~:arglists-meta",["^13",[null,null]],"^9",1,"~:variadic?",false,"^8",59,"~:ret-tag",["^M",[null,"~$string"]],"^:",59,"~:max-fixed-arity",1,"~:fn-var",true,"^2V",["^13",["^2W",["^13",[["^2X"]]]]]],"~$value-encode",["^ ","^5",["^ ","^7","ajax/url.cljc","^8",62,"^9",16,"^:",62,"^;",28,"^2U",true],"^2U",true,"^N","~$ajax.url/value-encode","^7","ajax/url.cljc","^;",28,"^9",1,"^8",62,"^:",62,"~:tag","~$js"],"~$key-value-pair-to-str",["^ ","^2T",null,"^5",["^ ","^7","ajax/url.cljc","^8",66,"^9",8,"^:",66,"^;",29,"^2U",true,"^2V",["^13",["^2W",["^13",[[["~$k","~$v"]]]]]]],"^2U",true,"^N","~$ajax.url/key-value-pair-to-str","^7","ajax/url.cljc","^;",29,"^2Z",["^13",[["~$p__32212"]]],"^2[",null,"^30",["^13",[null,null]],"^9",1,"^31",false,"^8",66,"^32","^33","^:",66,"^34",1,"^35",true,"^2V",["^13",["^2W",["^13",[[["~$k","~$v"]]]]]]],"~$vec-key-transform-fn",["^ ","^2T",null,"^5",["^ ","^7","ajax/url.cljc","^8",69,"^9",18,"^:",69,"^;",38,"^2U",true,"^2V",["^13",["^2W",["^13",[["~$vec-key-encode","~$k","~$v"],["^3>","~$k"],["^3>"]]]]],"~:top-fn",["^ ","^31",false,"~:fixed-arity",3,"^34",3,"^2Z",["^13",[["^3>","~$k","~$v"],["^3>","~$k"],["^3>"]]],"^2V",["^13",[["^3>","~$k","~$v"],["^3>","~$k"],["^3>"]]],"^30",["^13",[null,null,null]]]],"^2U",true,"^N","~$ajax.url/vec-key-transform-fn","^7","ajax/url.cljc","^;",38,"^3?",["^ ","^31",false,"^3@",3,"^34",3,"^2Z",["^13",[["^3>","~$k","~$v"],["^3>","~$k"],["^3>"]]],"^2V",["^13",[["^3>","~$k","~$v"],["^3>","~$k"],["^3>"]]],"^30",["^13",[null,null,null]]],"^2Z",["^13",[["^3>","~$k","~$v"],["^3>","~$k"],["^3>"]]],"^2[",null,"^3@",3,"^30",["^13",[null,null,null]],"^9",1,"^31",false,"~:methods",[["^ ","^3@",3,"^31",false,"^38","~$cljs.core/IVector"],["^ ","^3@",2,"^31",false,"^38","~$function"],["^ ","^3@",1,"^31",false,"^38","^3D"]],"^8",69,"^:",69,"^34",3,"^35",true,"^2V",["^13",[["^3>","~$k","~$v"],["^3>","~$k"],["^3>"]]]],"~$to-vec-key-transform",["^ ","^2T",null,"^5",["^ ","^7","ajax/url.cljc","^8",72,"^9",8,"^:",72,"^;",28,"^2U",true,"^2V",["^13",["^2W",["^13",[["~$vec-strategy"]]]]]],"^2U",true,"^N","~$ajax.url/to-vec-key-transform","^7","ajax/url.cljc","^;",28,"^2Z",["^13",[["^3F"]]],"^2[",null,"^30",["^13",[null,null]],"^9",1,"^31",false,"^8",72,"^32","^3D","^:",72,"^34",1,"^35",true,"^2V",["^13",["^2W",["^13",[["^3F"]]]]]],"~$param-to-key-value-pairs",["^ ","^2T",null,"^5",["^ ","^7","ajax/url.cljc","^8",80,"^9",18,"^:",80,"^;",42,"^2U",true,"^2V",["^13",["^2W",["^13",[["~$vec-key-transform","~$prefix",["^2X","~$value"]],["^3I","^3J"],["^3I"]]]]],"^3?",["^ ","^31",false,"^3@",3,"^34",3,"^2Z",["^13",[["^3I","^3J",["^2X","^3K"]],["^3I","^3J"],["^3I"]]],"^2V",["^13",[["^3I","^3J",["^2X","^3K"]],["^3I","^3J"],["^3I"]]],"^30",["^13",[null,null,null]]]],"^2U",true,"^N","~$ajax.url/param-to-key-value-pairs","^7","ajax/url.cljc","^;",42,"^3?",["^ ","^31",false,"^3@",3,"^34",3,"^2Z",["^13",[["^3I","^3J",["^2X","^3K"]],["^3I","^3J"],["^3I"]]],"^2V",["^13",[["^3I","^3J",["^2X","^3K"]],["^3I","^3J"],["^3I"]]],"^30",["^13",[null,null,null]]],"^2Z",["^13",[["^3I","^3J",["^2X","^3K"]],["^3I","^3J"],["^3I"]]],"^2[",null,"^3@",3,"^30",["^13",[null,null,null]],"^9",1,"^31",false,"^3B",[["^ ","^3@",3,"^31",false,"^38",["^M",["^3C","~$any"]]],["^ ","^3@",2,"^31",false,"^38","^3D"],["^ ","^3@",1,"^31",false,"^38","^3D"]],"^8",80,"^:",80,"^34",3,"^35",true,"^2V",["^13",[["^3I","^3J",["^2X","^3K"]],["^3I","^3J"],["^3I"]]]],"~$params-to-str",["^ ","^2T",null,"^5",["^ ","^7","ajax/url.cljc","^8",110,"^9",17,"^:",110,"^;",30,"^2V",["^13",["^2W",["^13",[["^3F","~$params"],["^3F"]]]]],"^3?",["^ ","^31",false,"^3@",2,"^34",2,"^2Z",["^13",[["^3F","^3O"],["^3F"]]],"^2V",["^13",[["^3F","^3O"],["^3F"]]],"^30",["^13",[null,null]]]],"^N","~$ajax.url/params-to-str","^7","ajax/url.cljc","^;",30,"^3?",["^ ","^31",false,"^3@",2,"^34",2,"^2Z",["^13",[["^3F","^3O"],["^3F"]]],"^2V",["^13",[["^3F","^3O"],["^3F"]]],"^30",["^13",[null,null]]],"^2Z",["^13",[["^3F","^3O"],["^3F"]]],"^2[",null,"^3@",2,"^30",["^13",[null,null]],"^9",1,"^31",false,"^3B",[["^ ","^3@",2,"^31",false,"^38","^39"],["^ ","^3@",1,"^31",false,"^38","^3D"]],"^8",110,"^:",110,"^34",2,"^35",true,"^2V",["^13",[["^3F","^3O"],["^3F"]]]],"~$url-request-format",["^ ","^2T",null,"^5",["^ ","^7","ajax/url.cljc","^8",120,"^9",7,"^:",120,"^;",25,"^2V",["^13",["^2W",["^13",[[],[["^ ","~:keys",["^3F"]]]]]]],"^6","The request format for simple POST and GET.","^3?",["^ ","^31",false,"^3@",1,"^34",1,"^2Z",["^13",[[],[["^ ","^3R",["^3F"]]]]],"^2V",["^13",[[],[["^ ","^3R",["^3F"]]]]],"^30",["^13",[null,null]]]],"^N","~$ajax.url/url-request-format","^7","ajax/url.cljc","^;",25,"^3?",["^ ","^31",false,"^3@",1,"^34",1,"^2Z",["^13",[[],[["^ ","^3R",["^3F"]]]]],"^2V",["^13",[[],[["^ ","^3R",["^3F"]]]]],"^30",["^13",[null,null]]],"^2Z",["^13",[[],[["^ ","^3R",["^3F"]]]]],"^2[",null,"^3@",1,"^30",["^13",[null,null]],"^9",1,"^31",false,"^3B",[["^ ","^3@",0,"^31",false,"^38","^3M"],["^ ","^3@",1,"^31",false,"^38","~$cljs.core/IMap"]],"^8",120,"^:",120,"^34",1,"^35",true,"^2V",["^13",[[],[["^ ","^3R",["^3F"]]]]],"^6","The request format for simple POST and GET."]],"^[",["^ ","^11","^11","~$m","^11","^W","^W"],"~:cljs.analyzer/constants",["^ ","^Y",["^M",["~:else","~:write","~:java","~:content-type","~:vec-strategy"]],"~:order",["^3X","^3V","^3Z","^3W","^3Y"]],"^16",["^ ","^Z",["^M",[]],"^[",["^M",[]]],"^17",["^ "],"^18",["^X","^W","^T","^V"]],"^Q","^O","~:ns-specs",["^ "],"~:ns-spec-vars",[],"~:compiler-options",["^1F",[["^42","~:static-fns"],true,["^42","~:elide-asserts"],false,["^42","~:optimize-constants"],null,["^42","^1="],null,["^42","~:external-config"],null,["^42","~:tooling-config"],null,["^42","~:emit-constants"],null,["^42","~:load-tests"],null,["^42","~:form-size-threshold"],null,["^42","~:infer-externs"],true,["^42","^1?"],null,["~:js-options","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^42","~:fn-invoke-direct"],null,["^42","~:source-map"],"/dev/null"]]]